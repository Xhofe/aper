(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const _ of d.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&o(_)}).observe(document,{childList:!0,subtree:!0});function t(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerpolicy&&(d.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?d.credentials="include":a.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(a){if(a.ep)return;a.ep=!0;const d=t(a);fetch(a.href,d)}})();const I={};function Oe(i){I.context=i}const Pe=(i,r)=>i===r,He=Symbol("solid-proxy"),Le=Symbol("solid-track"),U={equals:Pe};let ye=Ae;const C={},L=1,j=2,ge={owned:null,cleanups:null,context:null,owner:null};var T=null;let V=null,b=null,G=null,S=null,k=null,ne=0;function X(i,r){const t=b,o=T,a=i.length===0,d=a?ge:{owned:null,cleanups:null,context:null,owner:r||o},_=a?i:()=>i(()=>se(d));T=d,b=null;try{return ie(_,!0)}finally{b=t,T=o}}function W(i,r){r=r?Object.assign({},U,r):U;const t={value:i,observers:null,observerSlots:null,pending:C,comparator:r.equals||void 0},o=a=>(typeof a=="function"&&(a=a(t.pending!==C?t.pending:t.value)),oe(t,a));return[ve.bind(t),o]}function P(i,r,t){const o=re(i,r,!1,L);$(o)}function ee(i,r,t){ye=De;const o=re(i,r,!1,L);o.user=!0,k?k.push(o):$(o)}function Q(i,r,t){t=t?Object.assign({},U,t):U;const o=re(i,r,!0,0);return o.pending=C,o.observers=null,o.observerSlots=null,o.comparator=t.equals||void 0,$(o),ve.bind(o)}function Me(i){if(G)return i();let r;const t=G=[];try{r=i()}finally{G=null}return ie(()=>{for(let o=0;o<t.length;o+=1){const a=t[o];if(a.pending!==C){const d=a.pending;a.pending=C,oe(a,d)}}},!1),r}function K(i){let r,t=b;return b=null,r=i(),b=t,r}function Be(i){return T===null||(T.cleanups===null?T.cleanups=[i]:T.cleanups.push(i)),i}function ve(){const i=V;if(this.sources&&(this.state||i)){const r=S;S=null,this.state===L||i?$(this):Y(this),S=r}if(b){const r=this.observers?this.observers.length:0;b.sources?(b.sources.push(this),b.sourceSlots.push(r)):(b.sources=[this],b.sourceSlots=[r]),this.observers?(this.observers.push(b),this.observerSlots.push(b.sources.length-1)):(this.observers=[b],this.observerSlots=[b.sources.length-1])}return this.value}function oe(i,r,t){if(G)return i.pending===C&&G.push(i),i.pending=r,r;if(i.comparator&&i.comparator(i.value,r))return r;let o=!1;return i.value=r,i.observers&&i.observers.length&&ie(()=>{for(let a=0;a<i.observers.length;a+=1){const d=i.observers[a];o&&V.disposed.has(d),(o&&!d.tState||!o&&!d.state)&&(d.pure?S.push(d):k.push(d),d.observers&&we(d)),o||(d.state=L)}if(S.length>1e6)throw S=[],new Error},!1),r}function $(i){if(!i.fn)return;se(i);const r=T,t=b,o=ne;b=T=i,Fe(i,i.value,o),b=t,T=r}function Fe(i,r,t){let o;try{o=i.fn(r)}catch(a){be(a)}(!i.updatedAt||i.updatedAt<=t)&&(i.observers&&i.observers.length?oe(i,o):i.value=o,i.updatedAt=t)}function re(i,r,t,o=L,a){const d={fn:i,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:r,owner:T,context:null,pure:t};return T===null||T!==ge&&(T.owned?T.owned.push(d):T.owned=[d]),d}function N(i){const r=V;if(i.state===0||r)return;if(i.state===j||r)return Y(i);if(i.suspense&&K(i.suspense.inFallback))return i.suspense.effects.push(i);const t=[i];for(;(i=i.owner)&&(!i.updatedAt||i.updatedAt<ne);)(i.state||r)&&t.push(i);for(let o=t.length-1;o>=0;o--)if(i=t[o],i.state===L||r)$(i);else if(i.state===j||r){const a=S;S=null,Y(i,t[0]),S=a}}function ie(i,r){if(S)return i();let t=!1;r||(S=[]),k?t=!0:k=[],ne++;try{const o=i();return Ce(t),o}catch(o){S||(k=null),be(o)}}function Ce(i){S&&(Ae(S),S=null),!i&&(k.length?Me(()=>{ye(k),k=null}):k=null)}function Ae(i){for(let r=0;r<i.length;r++)N(i[r])}function De(i){let r,t=0;for(r=0;r<i.length;r++){const a=i[r];a.user?i[t++]=a:N(a)}I.context&&Oe();const o=i.length;for(r=0;r<t;r++)N(i[r]);for(r=o;r<i.length;r++)N(i[r])}function Y(i,r){const t=V;i.state=0;for(let o=0;o<i.sources.length;o+=1){const a=i.sources[o];a.sources&&(a.state===L||t?a!==r&&N(a):(a.state===j||t)&&Y(a,r))}}function we(i){const r=V;for(let t=0;t<i.observers.length;t+=1){const o=i.observers[t];(!o.state||r)&&(o.state=j,o.pure?S.push(o):k.push(o),o.observers&&we(o))}}function se(i){let r;if(i.sources)for(;i.sources.length;){const t=i.sources.pop(),o=i.sourceSlots.pop(),a=t.observers;if(a&&a.length){const d=a.pop(),_=t.observerSlots.pop();o<a.length&&(d.sourceSlots[_]=o,a[o]=d,t.observerSlots[o]=_)}}if(i.owned){for(r=0;r<i.owned.length;r++)se(i.owned[r]);i.owned=null}if(i.cleanups){for(r=0;r<i.cleanups.length;r++)i.cleanups[r]();i.cleanups=null}i.state=0,i.context=null}function be(i){throw i}const Ge=Symbol("fallback");function _e(i){for(let r=0;r<i.length;r++)i[r]()}function Ne(i,r,t={}){let o=[],a=[],d=[],_=0,p=r.length>1?[]:null;return Be(()=>_e(d)),()=>{let m=i()||[],h,y;return m[Le],K(()=>{let n=m.length,s,u,c,f,l,g,v,A,x;if(n===0)_!==0&&(_e(d),d=[],o=[],a=[],_=0,p&&(p=[])),t.fallback&&(o=[Ge],a[0]=X(O=>(d[0]=O,t.fallback())),_=1);else if(_===0){for(a=new Array(n),y=0;y<n;y++)o[y]=m[y],a[y]=X(e);_=n}else{for(c=new Array(n),f=new Array(n),p&&(l=new Array(n)),g=0,v=Math.min(_,n);g<v&&o[g]===m[g];g++);for(v=_-1,A=n-1;v>=g&&A>=g&&o[v]===m[A];v--,A--)c[A]=a[v],f[A]=d[v],p&&(l[A]=p[v]);for(s=new Map,u=new Array(A+1),y=A;y>=g;y--)x=m[y],h=s.get(x),u[y]=h===void 0?-1:h,s.set(x,y);for(h=g;h<=v;h++)x=o[h],y=s.get(x),y!==void 0&&y!==-1?(c[y]=a[h],f[y]=d[h],p&&(l[y]=p[h]),y=u[y],s.set(x,y)):d[h]();for(y=g;y<n;y++)y in c?(a[y]=c[y],d[y]=f[y],p&&(p[y]=l[y],p[y](y))):a[y]=X(e);a=a.slice(0,_=n),o=m.slice(0)}return a});function e(n){if(d[y]=n,p){const[s,u]=W(y);return p[y]=u,r(m[y],s)}return r(m[y])}}}function H(i,r){return K(()=>i(r||{}))}function q(){return!0}const Ve={get(i,r,t){return r===He?t:i.get(r)},has(i,r){return i.has(r)},set:q,deleteProperty:q,getOwnPropertyDescriptor(i,r){return{configurable:!0,enumerable:!0,get(){return i.get(r)},set:q,deleteProperty:q}},ownKeys(i){return i.keys()}};function z(i){return(i=typeof i=="function"?i():i)==null?{}:i}function $e(...i){return new Proxy({get(r){for(let t=i.length-1;t>=0;t--){const o=z(i[t])[r];if(o!==void 0)return o}},has(r){for(let t=i.length-1;t>=0;t--)if(r in z(i[t]))return!0;return!1},keys(){const r=[];for(let t=0;t<i.length;t++)r.push(...Object.keys(z(i[t])));return[...new Set(r)]}},Ve)}function xe(i){const r="fallback"in i&&{fallback:()=>i.fallback};return Q(Ne(()=>i.each,i.children,r||void 0))}function Re(i){let r=!1;const t=Q(()=>i.when,void 0,{equals:(o,a)=>r?o===a:!o==!a});return Q(()=>{const o=t();if(o){const a=i.children;return(r=typeof a=="function"&&a.length>0)?K(()=>a(o)):a}return i.fallback})}function qe(i,r,t){let o=t.length,a=r.length,d=o,_=0,p=0,m=r[a-1].nextSibling,h=null;for(;_<a||p<d;){if(r[_]===t[p]){_++,p++;continue}for(;r[a-1]===t[d-1];)a--,d--;if(a===_){const y=d<o?p?t[p-1].nextSibling:t[d-p]:m;for(;p<d;)i.insertBefore(t[p++],y)}else if(d===p)for(;_<a;)(!h||!h.has(r[_]))&&r[_].remove(),_++;else if(r[_]===t[d-1]&&t[p]===r[a-1]){const y=r[--a].nextSibling;i.insertBefore(t[p++],r[_++].nextSibling),i.insertBefore(t[--d],y),r[a]=t[d]}else{if(!h){h=new Map;let e=p;for(;e<d;)h.set(t[e],e++)}const y=h.get(r[_]);if(y!=null)if(p<y&&y<d){let e=_,n=1,s;for(;++e<a&&e<d&&!((s=h.get(r[e]))==null||s!==y+n);)n++;if(n>y-p){const u=r[_];for(;p<y;)i.insertBefore(t[p++],u)}else i.replaceChild(t[p++],r[_++])}else _++;else r[_++].remove()}}}const fe="_$DX_DELEGATE";function Xe(i,r,t){let o;return X(a=>{o=a,r===document?i():E(r,i(),r.firstChild?null:void 0,t)}),()=>{o(),r.textContent=""}}function M(i,r,t){const o=document.createElement("template");o.innerHTML=i;let a=o.content.firstChild;return t&&(a=a.firstChild),a}function Te(i,r=window.document){const t=r[fe]||(r[fe]=new Set);for(let o=0,a=i.length;o<a;o++){const d=i[o];t.has(d)||(t.add(d),r.addEventListener(d,Ue))}}function pe(i,r,t){t==null?i.removeAttribute(r):i.setAttribute(r,t)}function ae(i,r){r==null?i.removeAttribute("class"):i.className=r}function E(i,r,t,o){if(t!==void 0&&!o&&(o=[]),typeof r!="function")return Z(i,r,o,t);P(a=>Z(i,r(),a,t),o)}function Ue(i){const r=`$$${i.type}`;let t=i.composedPath&&i.composedPath()[0]||i.target;for(i.target!==t&&Object.defineProperty(i,"target",{configurable:!0,value:t}),Object.defineProperty(i,"currentTarget",{configurable:!0,get(){return t||document}}),I.registry&&!I.done&&(I.done=!0,document.querySelectorAll("[id^=pl-]").forEach(o=>o.remove()));t!==null;){const o=t[r];if(o&&!t.disabled){const a=t[`${r}Data`];if(a!==void 0?o.call(t,a,i):o.call(t,i),i.cancelBubble)return}t=t.host&&t.host!==t&&t.host instanceof Node?t.host:t.parentNode}}function Z(i,r,t,o,a){for(I.context&&!t&&(t=[...i.childNodes]);typeof t=="function";)t=t();if(r===t)return t;const d=typeof r,_=o!==void 0;if(i=_&&t[0]&&t[0].parentNode||i,d==="string"||d==="number"){if(I.context)return t;if(d==="number"&&(r=r.toString()),_){let p=t[0];p&&p.nodeType===3?p.data=r:p=document.createTextNode(r),t=F(i,t,o,p)}else t!==""&&typeof t=="string"?t=i.firstChild.data=r:t=i.textContent=r}else if(r==null||d==="boolean"){if(I.context)return t;t=F(i,t,o)}else{if(d==="function")return P(()=>{let p=r();for(;typeof p=="function";)p=p();t=Z(i,p,t,o)}),()=>t;if(Array.isArray(r)){const p=[],m=t&&Array.isArray(t);if(te(p,r,t,a))return P(()=>t=Z(i,p,t,o,!0)),()=>t;if(I.context){for(let h=0;h<p.length;h++)if(p[h].parentNode)return t=p}if(p.length===0){if(t=F(i,t,o),_)return t}else m?t.length===0?he(i,p,o):qe(i,t,p):(t&&F(i),he(i,p));t=p}else if(r instanceof Node){if(I.context&&r.parentNode)return t=_?[r]:r;if(Array.isArray(t)){if(_)return t=F(i,t,o,r);F(i,t,null,r)}else t==null||t===""||!i.firstChild?i.appendChild(r):i.replaceChild(r,i.firstChild);t=r}}return t}function te(i,r,t,o){let a=!1;for(let d=0,_=r.length;d<_;d++){let p=r[d],m=t&&t[d];if(p instanceof Node)i.push(p);else if(!(p==null||p===!0||p===!1))if(Array.isArray(p))a=te(i,p,m)||a;else if(typeof p=="function")if(o){for(;typeof p=="function";)p=p();a=te(i,Array.isArray(p)?p:[p],m)||a}else i.push(p),a=!0;else{const h=String(p);m&&m.nodeType===3&&m.data===h?i.push(m):i.push(document.createTextNode(h))}}return a}function he(i,r,t){for(let o=0,a=r.length;o<a;o++)i.insertBefore(r[o],t)}function F(i,r,t,o){if(t===void 0)return i.textContent="";const a=o||document.createTextNode("");if(r.length){let d=!1;for(let _=r.length-1;_>=0;_--){const p=r[_];if(a!==p){const m=p.parentNode===i;!d&&!_?m?i.replaceChild(a,p):i.insertBefore(a,t):m&&p.remove()}else d=!0}}else i.insertBefore(a,t);return[a]}function Se(i){var r,t,o="";if(typeof i=="string"||typeof i=="number")o+=i;else if(typeof i=="object")if(Array.isArray(i))for(r=0;r<i.length;r++)i[r]&&(t=Se(i[r]))&&(o&&(o+=" "),o+=t);else for(r in i)i[r]&&(o&&(o+=" "),o+=r);return o}function ue(){for(var i,r,t=0,o="";t<arguments.length;)(i=arguments[t++])&&(r=Se(i))&&(o&&(o+=" "),o+=r);return o}const je=M("<div></div>"),We=M('<div class="aper-list-item-name"></div>'),Qe=M('<div class="aper-list-item-artist"></div>'),Ye=i=>H(xe,{get each(){return i.audios},children:(r,t)=>(()=>{const o=je.cloneNode(!0);return o.$$click=()=>{i.playIndex!==t()&&i.onPlayIndexChange?.(t())},E(o,H(Ze,r)),P(()=>ae(o,ue("aper-list-item",{"aper-list-playing":t()===i.playIndex}))),o})()}),Ze=i=>[(()=>{const r=We.cloneNode(!0);return E(r,()=>i.name),P(()=>pe(r,"title",i.name)),r})(),(()=>{const r=Qe.cloneNode(!0);return E(r,()=>i.artist),P(()=>pe(r,"title",i.artist)),r})()];Te(["click"]);const Ke=typeof window>"u"?require("os").EOL:`
`;function Je(i){const r=i.trim().slice(1,-1),t=r.indexOf(":");return[r.substring(0,t).trim(),r.substring(t+1).trim()]}function ze(i){if(typeof i!="string")throw new TypeError("expect first argument to be a string");let r=i.split(Ke);const t=/\[(\d*\:\d*\.?\d*)\]/,o=/(.+)/,a=t,d=new RegExp(t.source+o.source),_=[],p=[],m={};for(let y=0;d.test(r[y])===!1;y++)_.push(r[y]);_.reduce((y,e)=>{const[n,s]=Je(e);return y[n]=s,y},m),r.splice(0,_.length);const h=new RegExp(d.source+"|"+a.source);r=r.filter(y=>h.test(y));for(let y=0,e=r.length;y<e;y++){const n=d.exec(r[y]),s=a.exec(r[y+1]);if(n&&s){const[,u,c]=n,[,f]=s;p.push({start:me(u),text:c,end:me(f)})}}return m.scripts=p,m}function me(i){i=i.split(":");const r=parseInt(i[0],10),t=parseFloat(i[1]);if(r>0){const o=r*60+t;return parseFloat(o.toFixed(2))}return t}const et=M('<div class="aper-lyric-none">No lyric yet.</div>'),tt=M("<div></div>"),nt=i=>{const[r,t]=W(),o=async()=>{t(void 0);let _=i.lyric;if(!_){if(i.lrc)_=await(await fetch(i.lrc)).text();else return;t(ze(_))}};ee(()=>{o()});const a=()=>{const _=document.querySelector(".aper-lyric-item-active");_&&_.scrollIntoView({block:"center",behavior:"smooth"})},d=Q(()=>r()?r().scripts.findIndex(_=>_.start<=i.seek&&_.end>=i.seek):-1);return ee(()=>{d(),a()}),H(Re,{get when(){return r()},get fallback(){return et.cloneNode(!0)},get children(){return H(xe,{get each(){return r().scripts},children:(_,p)=>(()=>{const m=tt.cloneNode(!0);return E(m,()=>_.text),P(()=>ae(m,ue("aper-lyric-item",{"aper-lyric-item-active":d()===p()}))),m})()})}})};var D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ke={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(i){(function(){var r=function(){this.init()};r.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var n=this||t;if(e=parseFloat(e),n.ctx||y(),typeof e<"u"&&e>=0&&e<=1){if(n._volume=e,n._muted)return n;n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var s=0;s<n._howls.length;s++)if(!n._howls[s]._webAudio)for(var u=n._howls[s]._getSoundIds(),c=0;c<u.length;c++){var f=n._howls[s]._soundById(u[c]);f&&f._node&&(f._node.volume=f._volume*e)}return n}return n._volume},mute:function(e){var n=this||t;n.ctx||y(),n._muted=e,n.usingWebAudio&&n.masterGain.gain.setValueAtTime(e?0:n._volume,t.ctx.currentTime);for(var s=0;s<n._howls.length;s++)if(!n._howls[s]._webAudio)for(var u=n._howls[s]._getSoundIds(),c=0;c<u.length;c++){var f=n._howls[s]._soundById(u[c]);f&&f._node&&(f._node.muted=e?!0:f._muted)}return n},stop:function(){for(var e=this||t,n=0;n<e._howls.length;n++)e._howls[n].stop();return e},unload:function(){for(var e=this||t,n=e._howls.length-1;n>=0;n--)e._howls[n].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,y()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var n=new Audio;typeof n.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var n=new Audio;n.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,n=null;try{n=typeof Audio<"u"?new Audio:null}catch{return e}if(!n||typeof n.canPlayType!="function")return e;var s=n.canPlayType("audio/mpeg;").replace(/^no$/,""),u=e._navigator?e._navigator.userAgent:"",c=u.match(/OPR\/([0-6].)/g),f=c&&parseInt(c[0].split("/")[1],10)<33,l=u.indexOf("Safari")!==-1&&u.indexOf("Chrome")===-1,g=u.match(/Version\/(.*?) /),v=l&&g&&parseInt(g[1],10)<15;return e._codecs={mp3:!!(!f&&(s||n.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!s,opus:!!n.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(n.canPlayType('audio/wav; codecs="1"')||n.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!n.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!n.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(n.canPlayType("audio/x-m4a;")||n.canPlayType("audio/m4a;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(n.canPlayType("audio/x-m4b;")||n.canPlayType("audio/m4b;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(n.canPlayType("audio/x-mp4;")||n.canPlayType("audio/mp4;")||n.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!v&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!v&&n.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!n.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(n.canPlayType("audio/x-flac;")||n.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var n=function(s){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var u=new Audio;u._unlocked=!0,e._releaseHtml5Audio(u)}catch{e.noAudio=!0;break}for(var c=0;c<e._howls.length;c++)if(!e._howls[c]._webAudio)for(var f=e._howls[c]._getSoundIds(),l=0;l<f.length;l++){var g=e._howls[c]._soundById(f[l]);g&&g._node&&!g._node._unlocked&&(g._node._unlocked=!0,g._node.load())}e._autoResume();var v=e.ctx.createBufferSource();v.buffer=e._scratchBuffer,v.connect(e.ctx.destination),typeof v.start>"u"?v.noteOn(0):v.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),v.onended=function(){v.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",n,!0),document.removeEventListener("touchend",n,!0),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",n,!0);for(var A=0;A<e._howls.length;A++)e._howls[A]._emit("unlock")}};return document.addEventListener("touchstart",n,!0),document.addEventListener("touchend",n,!0),document.addEventListener("click",n,!0),document.addEventListener("keydown",n,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var n=new Audio().play();return n&&typeof Promise<"u"&&(n instanceof Promise||typeof n.then=="function")&&n.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var n=this||t;return e._unlocked&&n._html5AudioPool.push(e),n},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!t.usingWebAudio)){for(var n=0;n<e._howls.length;n++)if(e._howls[n]._webAudio){for(var s=0;s<e._howls[n]._sounds.length;s++)if(!e._howls[n]._sounds[s]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var u=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(u,u)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!t.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var t=new r,o=function(e){var n=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}n.init(e)};o.prototype={init:function(e){var n=this;return t.ctx||y(),n._autoplay=e.autoplay||!1,n._format=typeof e.format!="string"?e.format:[e.format],n._html5=e.html5||!1,n._muted=e.mute||!1,n._loop=e.loop||!1,n._pool=e.pool||5,n._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,n._rate=e.rate||1,n._sprite=e.sprite||{},n._src=typeof e.src!="string"?e.src:[e.src],n._volume=e.volume!==void 0?e.volume:1,n._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},n._duration=0,n._state="unloaded",n._sounds=[],n._endTimers={},n._queue=[],n._playLock=!1,n._onend=e.onend?[{fn:e.onend}]:[],n._onfade=e.onfade?[{fn:e.onfade}]:[],n._onload=e.onload?[{fn:e.onload}]:[],n._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],n._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],n._onpause=e.onpause?[{fn:e.onpause}]:[],n._onplay=e.onplay?[{fn:e.onplay}]:[],n._onstop=e.onstop?[{fn:e.onstop}]:[],n._onmute=e.onmute?[{fn:e.onmute}]:[],n._onvolume=e.onvolume?[{fn:e.onvolume}]:[],n._onrate=e.onrate?[{fn:e.onrate}]:[],n._onseek=e.onseek?[{fn:e.onseek}]:[],n._onunlock=e.onunlock?[{fn:e.onunlock}]:[],n._onresume=[],n._webAudio=t.usingWebAudio&&!n._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(n),n._autoplay&&n._queue.push({event:"play",action:function(){n.play()}}),n._preload&&n._preload!=="none"&&n.load(),n},load:function(){var e=this,n=null;if(t.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var s=0;s<e._src.length;s++){var u,c;if(e._format&&e._format[s])u=e._format[s];else{if(c=e._src[s],typeof c!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}u=/^data:audio\/([^;,]+);/i.exec(c),u||(u=/\.([^.]+)$/.exec(c.split("?",1)[0])),u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),u&&t.codecs(u)){n=e._src[s];break}}if(!n){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=n,e._state="loading",window.location.protocol==="https:"&&n.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new a(e),e._webAudio&&_(e),e},play:function(e,n){var s=this,u=null;if(typeof e=="number")u=e,e=null;else{if(typeof e=="string"&&s._state==="loaded"&&!s._sprite[e])return null;if(typeof e>"u"&&(e="__default",!s._playLock)){for(var c=0,f=0;f<s._sounds.length;f++)s._sounds[f]._paused&&!s._sounds[f]._ended&&(c++,u=s._sounds[f]._id);c===1?e=null:u=null}}var l=u?s._soundById(u):s._inactiveSound();if(!l)return null;if(u&&!e&&(e=l._sprite||"__default"),s._state!=="loaded"){l._sprite=e,l._ended=!1;var g=l._id;return s._queue.push({event:"play",action:function(){s.play(g)}}),g}if(u&&!l._paused)return n||s._loadQueue("play"),l._id;s._webAudio&&t._autoResume();var v=Math.max(0,l._seek>0?l._seek:s._sprite[e][0]/1e3),A=Math.max(0,(s._sprite[e][0]+s._sprite[e][1])/1e3-v),x=A*1e3/Math.abs(l._rate),O=s._sprite[e][0]/1e3,R=(s._sprite[e][0]+s._sprite[e][1])/1e3;l._sprite=e,l._ended=!1;var J=function(){l._paused=!1,l._seek=v,l._start=O,l._stop=R,l._loop=!!(l._loop||s._sprite[e][2])};if(v>=R){s._ended(l);return}var w=l._node;if(s._webAudio){var le=function(){s._playLock=!1,J(),s._refreshBuffer(l);var B=l._muted||s._muted?0:l._volume;w.gain.setValueAtTime(B,t.ctx.currentTime),l._playStart=t.ctx.currentTime,typeof w.bufferSource.start>"u"?l._loop?w.bufferSource.noteGrainOn(0,v,86400):w.bufferSource.noteGrainOn(0,v,A):l._loop?w.bufferSource.start(0,v,86400):w.bufferSource.start(0,v,A),x!==1/0&&(s._endTimers[l._id]=setTimeout(s._ended.bind(s,l),x)),n||setTimeout(function(){s._emit("play",l._id),s._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?le():(s._playLock=!0,s.once("resume",le),s._clearTimer(l._id))}else{var de=function(){w.currentTime=v,w.muted=l._muted||s._muted||t._muted||w.muted,w.volume=l._volume*t.volume(),w.playbackRate=l._rate;try{var B=w.play();if(B&&typeof Promise<"u"&&(B instanceof Promise||typeof B.then=="function")?(s._playLock=!0,J(),B.then(function(){s._playLock=!1,w._unlocked=!0,n?s._loadQueue():s._emit("play",l._id)}).catch(function(){s._playLock=!1,s._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),l._ended=!0,l._paused=!0})):n||(s._playLock=!1,J(),s._emit("play",l._id)),w.playbackRate=l._rate,w.paused){s._emit("playerror",l._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||l._loop?s._endTimers[l._id]=setTimeout(s._ended.bind(s,l),x):(s._endTimers[l._id]=function(){s._ended(l),w.removeEventListener("ended",s._endTimers[l._id],!1)},w.addEventListener("ended",s._endTimers[l._id],!1))}catch(Ee){s._emit("playerror",l._id,Ee)}};w.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(w.src=s._src,w.load());var Ie=window&&window.ejecta||!w.readyState&&t._navigator.isCocoonJS;if(w.readyState>=3||Ie)de();else{s._playLock=!0,s._state="loading";var ce=function(){s._state="loaded",de(),w.removeEventListener(t._canPlayEvent,ce,!1)};w.addEventListener(t._canPlayEvent,ce,!1),s._clearTimer(l._id)}}return l._id},pause:function(e){var n=this;if(n._state!=="loaded"||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(e)}}),n;for(var s=n._getSoundIds(e),u=0;u<s.length;u++){n._clearTimer(s[u]);var c=n._soundById(s[u]);if(c&&!c._paused&&(c._seek=n.seek(s[u]),c._rateSeek=0,c._paused=!0,n._stopFade(s[u]),c._node))if(n._webAudio){if(!c._node.bufferSource)continue;typeof c._node.bufferSource.stop>"u"?c._node.bufferSource.noteOff(0):c._node.bufferSource.stop(0),n._cleanBuffer(c._node)}else(!isNaN(c._node.duration)||c._node.duration===1/0)&&c._node.pause();arguments[1]||n._emit("pause",c?c._id:null)}return n},stop:function(e,n){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"stop",action:function(){s.stop(e)}}),s;for(var u=s._getSoundIds(e),c=0;c<u.length;c++){s._clearTimer(u[c]);var f=s._soundById(u[c]);f&&(f._seek=f._start||0,f._rateSeek=0,f._paused=!0,f._ended=!0,s._stopFade(u[c]),f._node&&(s._webAudio?f._node.bufferSource&&(typeof f._node.bufferSource.stop>"u"?f._node.bufferSource.noteOff(0):f._node.bufferSource.stop(0),s._cleanBuffer(f._node)):(!isNaN(f._node.duration)||f._node.duration===1/0)&&(f._node.currentTime=f._start||0,f._node.pause(),f._node.duration===1/0&&s._clearSound(f._node))),n||s._emit("stop",f._id))}return s},mute:function(e,n){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"mute",action:function(){s.mute(e,n)}}),s;if(typeof n>"u")if(typeof e=="boolean")s._muted=e;else return s._muted;for(var u=s._getSoundIds(n),c=0;c<u.length;c++){var f=s._soundById(u[c]);f&&(f._muted=e,f._interval&&s._stopFade(f._id),s._webAudio&&f._node?f._node.gain.setValueAtTime(e?0:f._volume,t.ctx.currentTime):f._node&&(f._node.muted=t._muted?!0:e),s._emit("mute",f._id))}return s},volume:function(){var e=this,n=arguments,s,u;if(n.length===0)return e._volume;if(n.length===1||n.length===2&&typeof n[1]>"u"){var c=e._getSoundIds(),f=c.indexOf(n[0]);f>=0?u=parseInt(n[0],10):s=parseFloat(n[0])}else n.length>=2&&(s=parseFloat(n[0]),u=parseInt(n[1],10));var l;if(typeof s<"u"&&s>=0&&s<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,n)}}),e;typeof u>"u"&&(e._volume=s),u=e._getSoundIds(u);for(var g=0;g<u.length;g++)l=e._soundById(u[g]),l&&(l._volume=s,n[2]||e._stopFade(u[g]),e._webAudio&&l._node&&!l._muted?l._node.gain.setValueAtTime(s,t.ctx.currentTime):l._node&&!l._muted&&(l._node.volume=s*t.volume()),e._emit("volume",l._id))}else return l=u?e._soundById(u):e._sounds[0],l?l._volume:0;return e},fade:function(e,n,s,u){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"fade",action:function(){c.fade(e,n,s,u)}}),c;e=Math.min(Math.max(0,parseFloat(e)),1),n=Math.min(Math.max(0,parseFloat(n)),1),s=parseFloat(s),c.volume(e,u);for(var f=c._getSoundIds(u),l=0;l<f.length;l++){var g=c._soundById(f[l]);if(g){if(u||c._stopFade(f[l]),c._webAudio&&!g._muted){var v=t.ctx.currentTime,A=v+s/1e3;g._volume=e,g._node.gain.setValueAtTime(e,v),g._node.gain.linearRampToValueAtTime(n,A)}c._startFadeInterval(g,e,n,s,f[l],typeof u>"u")}}return c},_startFadeInterval:function(e,n,s,u,c,f){var l=this,g=n,v=s-n,A=Math.abs(v/.01),x=Math.max(4,A>0?u/A:u),O=Date.now();e._fadeTo=s,e._interval=setInterval(function(){var R=(Date.now()-O)/u;O=Date.now(),g+=v*R,g=Math.round(g*100)/100,v<0?g=Math.max(s,g):g=Math.min(s,g),l._webAudio?e._volume=g:l.volume(g,e._id,!0),f&&(l._volume=g),(s<n&&g<=s||s>n&&g>=s)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,l.volume(s,e._id),l._emit("fade",e._id))},x)},_stopFade:function(e){var n=this,s=n._soundById(e);return s&&s._interval&&(n._webAudio&&s._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(s._interval),s._interval=null,n.volume(s._fadeTo,e),s._fadeTo=null,n._emit("fade",e)),n},loop:function(){var e=this,n=arguments,s,u,c;if(n.length===0)return e._loop;if(n.length===1)if(typeof n[0]=="boolean")s=n[0],e._loop=s;else return c=e._soundById(parseInt(n[0],10)),c?c._loop:!1;else n.length===2&&(s=n[0],u=parseInt(n[1],10));for(var f=e._getSoundIds(u),l=0;l<f.length;l++)c=e._soundById(f[l]),c&&(c._loop=s,e._webAudio&&c._node&&c._node.bufferSource&&(c._node.bufferSource.loop=s,s&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop,e.playing(f[l])&&(e.pause(f[l],!0),e.play(f[l],!0)))));return e},rate:function(){var e=this,n=arguments,s,u;if(n.length===0)u=e._sounds[0]._id;else if(n.length===1){var c=e._getSoundIds(),f=c.indexOf(n[0]);f>=0?u=parseInt(n[0],10):s=parseFloat(n[0])}else n.length===2&&(s=parseFloat(n[0]),u=parseInt(n[1],10));var l;if(typeof s=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,n)}}),e;typeof u>"u"&&(e._rate=s),u=e._getSoundIds(u);for(var g=0;g<u.length;g++)if(l=e._soundById(u[g]),l){e.playing(u[g])&&(l._rateSeek=e.seek(u[g]),l._playStart=e._webAudio?t.ctx.currentTime:l._playStart),l._rate=s,e._webAudio&&l._node&&l._node.bufferSource?l._node.bufferSource.playbackRate.setValueAtTime(s,t.ctx.currentTime):l._node&&(l._node.playbackRate=s);var v=e.seek(u[g]),A=(e._sprite[l._sprite][0]+e._sprite[l._sprite][1])/1e3-v,x=A*1e3/Math.abs(l._rate);(e._endTimers[u[g]]||!l._paused)&&(e._clearTimer(u[g]),e._endTimers[u[g]]=setTimeout(e._ended.bind(e,l),x)),e._emit("rate",l._id)}}else return l=e._soundById(u),l?l._rate:e._rate;return e},seek:function(){var e=this,n=arguments,s,u;if(n.length===0)e._sounds.length&&(u=e._sounds[0]._id);else if(n.length===1){var c=e._getSoundIds(),f=c.indexOf(n[0]);f>=0?u=parseInt(n[0],10):e._sounds.length&&(u=e._sounds[0]._id,s=parseFloat(n[0]))}else n.length===2&&(s=parseFloat(n[0]),u=parseInt(n[1],10));if(typeof u>"u")return 0;if(typeof s=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,n)}}),e;var l=e._soundById(u);if(l)if(typeof s=="number"&&s>=0){var g=e.playing(u);g&&e.pause(u,!0),l._seek=s,l._ended=!1,e._clearTimer(u),!e._webAudio&&l._node&&!isNaN(l._node.duration)&&(l._node.currentTime=s);var v=function(){g&&e.play(u,!0),e._emit("seek",u)};if(g&&!e._webAudio){var A=function(){e._playLock?setTimeout(A,0):v()};setTimeout(A,0)}else v()}else if(e._webAudio){var x=e.playing(u)?t.ctx.currentTime-l._playStart:0,O=l._rateSeek?l._rateSeek-l._seek:0;return l._seek+(O+x*Math.abs(l._rate))}else return l._node.currentTime;return e},playing:function(e){var n=this;if(typeof e=="number"){var s=n._soundById(e);return s?!s._paused:!1}for(var u=0;u<n._sounds.length;u++)if(!n._sounds[u]._paused)return!0;return!1},duration:function(e){var n=this,s=n._duration,u=n._soundById(e);return u&&(s=n._sprite[u._sprite][1]/1e3),s},state:function(){return this._state},unload:function(){for(var e=this,n=e._sounds,s=0;s<n.length;s++)n[s]._paused||e.stop(n[s]._id),e._webAudio||(e._clearSound(n[s]._node),n[s]._node.removeEventListener("error",n[s]._errorFn,!1),n[s]._node.removeEventListener(t._canPlayEvent,n[s]._loadFn,!1),n[s]._node.removeEventListener("ended",n[s]._endFn,!1),t._releaseHtml5Audio(n[s]._node)),delete n[s]._node,e._clearTimer(n[s]._id);var u=t._howls.indexOf(e);u>=0&&t._howls.splice(u,1);var c=!0;for(s=0;s<t._howls.length;s++)if(t._howls[s]._src===e._src||e._src.indexOf(t._howls[s]._src)>=0){c=!1;break}return d&&c&&delete d[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,s,u){var c=this,f=c["_on"+e];return typeof n=="function"&&f.push(u?{id:s,fn:n,once:u}:{id:s,fn:n}),c},off:function(e,n,s){var u=this,c=u["_on"+e],f=0;if(typeof n=="number"&&(s=n,n=null),n||s)for(f=0;f<c.length;f++){var l=s===c[f].id;if(n===c[f].fn&&l||!n&&l){c.splice(f,1);break}}else if(e)u["_on"+e]=[];else{var g=Object.keys(u);for(f=0;f<g.length;f++)g[f].indexOf("_on")===0&&Array.isArray(u[g[f]])&&(u[g[f]]=[])}return u},once:function(e,n,s){var u=this;return u.on(e,n,s,1),u},_emit:function(e,n,s){for(var u=this,c=u["_on"+e],f=c.length-1;f>=0;f--)(!c[f].id||c[f].id===n||e==="load")&&(setTimeout(function(l){l.call(this,n,s)}.bind(u,c[f].fn),0),c[f].once&&u.off(e,c[f].fn,c[f].id));return u._loadQueue(e),u},_loadQueue:function(e){var n=this;if(n._queue.length>0){var s=n._queue[0];s.event===e&&(n._queue.shift(),n._loadQueue()),e||s.action()}return n},_ended:function(e){var n=this,s=e._sprite;if(!n._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(n._ended.bind(n,e),100),n;var u=!!(e._loop||n._sprite[s][2]);if(n._emit("end",e._id),!n._webAudio&&u&&n.stop(e._id,!0).play(e._id),n._webAudio&&u){n._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var c=(e._stop-e._start)*1e3/Math.abs(e._rate);n._endTimers[e._id]=setTimeout(n._ended.bind(n,e),c)}return n._webAudio&&!u&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,n._clearTimer(e._id),n._cleanBuffer(e._node),t._autoSuspend()),!n._webAudio&&!u&&n.stop(e._id,!0),n},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if(typeof n._endTimers[e]!="function")clearTimeout(n._endTimers[e]);else{var s=n._soundById(e);s&&s._node&&s._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,s=0;s<n._sounds.length;s++)if(e===n._sounds[s]._id)return n._sounds[s];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new a(e)},_drain:function(){var e=this,n=e._pool,s=0,u=0;if(!(e._sounds.length<n)){for(u=0;u<e._sounds.length;u++)e._sounds[u]._ended&&s++;for(u=e._sounds.length-1;u>=0;u--){if(s<=n)return;e._sounds[u]._ended&&(e._webAudio&&e._sounds[u]._node&&e._sounds[u]._node.disconnect(0),e._sounds.splice(u,1),s--)}}},_getSoundIds:function(e){var n=this;if(typeof e>"u"){for(var s=[],u=0;u<n._sounds.length;u++)s.push(n._sounds[u]._id);return s}else return[e]},_refreshBuffer:function(e){var n=this;return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=d[n._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),n},_cleanBuffer:function(e){var n=this,s=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),s))try{e.bufferSource.buffer=t._scratchBuffer}catch{}return e.bufferSource=null,n},_clearSound:function(e){var n=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);n||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(e){this._parent=e,this.init()};a.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,n._sounds.push(e),e.create(),e},create:function(){var e=this,n=e._parent,s=t._muted||e._muted||e._parent._muted?0:e._volume;return n._webAudio?(e._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(s,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=n._src,e._node.preload=n._preload===!0?"auto":n._preload,e._node.volume=s*t.volume(),e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._rate=n._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(e._node.duration*10)/10,Object.keys(n._sprite).length===0&&(n._sprite={__default:[0,n._duration*1e3]}),n._state!=="loaded"&&(n._state="loaded",n._emit("load"),n._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,n=e._parent;n._duration===1/0&&(n._duration=Math.ceil(e._node.duration*10)/10,n._sprite.__default[1]===1/0&&(n._sprite.__default[1]=n._duration*1e3),n._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var d={},_=function(e){var n=e._src;if(d[n]){e._duration=d[n].duration,h(e);return}if(/^data:[^;]+;base64,/.test(n)){for(var s=atob(n.split(",")[1]),u=new Uint8Array(s.length),c=0;c<s.length;++c)u[c]=s.charCodeAt(c);m(u.buffer,e)}else{var f=new XMLHttpRequest;f.open(e._xhr.method,n,!0),f.withCredentials=e._xhr.withCredentials,f.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(l){f.setRequestHeader(l,e._xhr.headers[l])}),f.onload=function(){var l=(f.status+"")[0];if(l!=="0"&&l!=="2"&&l!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+f.status+".");return}m(f.response,e)},f.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete d[n],e.load())},p(f)}},p=function(e){try{e.send()}catch{e.onerror()}},m=function(e,n){var s=function(){n._emit("loaderror",null,"Decoding audio data failed.")},u=function(c){c&&n._sounds.length>0?(d[n._src]=c,h(n,c)):s()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(e).then(u).catch(s):t.ctx.decodeAudioData(e,u,s)},h=function(e,n){n&&!e._duration&&(e._duration=n.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},y=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),n=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),s=n?parseInt(n[1],10):null;if(e&&s&&s<9){var u=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!u&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};i.Howler=t,i.Howl=o,typeof D<"u"?(D.HowlerGlobal=r,D.Howler=t,D.Howl=o,D.Sound=a):typeof window<"u"&&(window.HowlerGlobal=r,window.Howler=t,window.Howl=o,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var o=this;if(!o.ctx||!o.ctx.listener)return o;for(var a=o._howls.length-1;a>=0;a--)o._howls[a].stereo(t);return o},HowlerGlobal.prototype.pos=function(t,o,a){var d=this;if(!d.ctx||!d.ctx.listener)return d;if(o=typeof o!="number"?d._pos[1]:o,a=typeof a!="number"?d._pos[2]:a,typeof t=="number")d._pos=[t,o,a],typeof d.ctx.listener.positionX<"u"?(d.ctx.listener.positionX.setTargetAtTime(d._pos[0],Howler.ctx.currentTime,.1),d.ctx.listener.positionY.setTargetAtTime(d._pos[1],Howler.ctx.currentTime,.1),d.ctx.listener.positionZ.setTargetAtTime(d._pos[2],Howler.ctx.currentTime,.1)):d.ctx.listener.setPosition(d._pos[0],d._pos[1],d._pos[2]);else return d._pos;return d},HowlerGlobal.prototype.orientation=function(t,o,a,d,_,p){var m=this;if(!m.ctx||!m.ctx.listener)return m;var h=m._orientation;if(o=typeof o!="number"?h[1]:o,a=typeof a!="number"?h[2]:a,d=typeof d!="number"?h[3]:d,_=typeof _!="number"?h[4]:_,p=typeof p!="number"?h[5]:p,typeof t=="number")m._orientation=[t,o,a,d,_,p],typeof m.ctx.listener.forwardX<"u"?(m.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),m.ctx.listener.forwardY.setTargetAtTime(o,Howler.ctx.currentTime,.1),m.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),m.ctx.listener.upX.setTargetAtTime(d,Howler.ctx.currentTime,.1),m.ctx.listener.upY.setTargetAtTime(_,Howler.ctx.currentTime,.1),m.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):m.ctx.listener.setOrientation(t,o,a,d,_,p);else return h;return m},Howl.prototype.init=function(t){return function(o){var a=this;return a._orientation=o.orientation||[1,0,0],a._stereo=o.stereo||null,a._pos=o.pos||null,a._pannerAttr={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:360,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:360,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:0,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:"inverse",maxDistance:typeof o.maxDistance<"u"?o.maxDistance:1e4,panningModel:typeof o.panningModel<"u"?o.panningModel:"HRTF",refDistance:typeof o.refDistance<"u"?o.refDistance:1,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:1},a._onstereo=o.onstereo?[{fn:o.onstereo}]:[],a._onpos=o.onpos?[{fn:o.onpos}]:[],a._onorientation=o.onorientation?[{fn:o.onorientation}]:[],t.call(this,o)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,o){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(t,o)}}),a;var d=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof o>"u")if(typeof t=="number")a._stereo=t,a._pos=[t,0,0];else return a._stereo;for(var _=a._getSoundIds(o),p=0;p<_.length;p++){var m=a._soundById(_[p]);if(m)if(typeof t=="number")m._stereo=t,m._pos=[t,0,0],m._node&&(m._pannerAttr.panningModel="equalpower",(!m._panner||!m._panner.pan)&&r(m,d),d==="spatial"?typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):m._panner.setPosition(t,0,0):m._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),a._emit("stereo",m._id);else return m._stereo}return a},Howl.prototype.pos=function(t,o,a,d){var _=this;if(!_._webAudio)return _;if(_._state!=="loaded")return _._queue.push({event:"pos",action:function(){_.pos(t,o,a,d)}}),_;if(o=typeof o!="number"?0:o,a=typeof a!="number"?-.5:a,typeof d>"u")if(typeof t=="number")_._pos=[t,o,a];else return _._pos;for(var p=_._getSoundIds(d),m=0;m<p.length;m++){var h=_._soundById(p[m]);if(h)if(typeof t=="number")h._pos=[t,o,a],h._node&&((!h._panner||h._panner.pan)&&r(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(o,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):h._panner.setPosition(t,o,a)),_._emit("pos",h._id);else return h._pos}return _},Howl.prototype.orientation=function(t,o,a,d){var _=this;if(!_._webAudio)return _;if(_._state!=="loaded")return _._queue.push({event:"orientation",action:function(){_.orientation(t,o,a,d)}}),_;if(o=typeof o!="number"?_._orientation[1]:o,a=typeof a!="number"?_._orientation[2]:a,typeof d>"u")if(typeof t=="number")_._orientation=[t,o,a];else return _._orientation;for(var p=_._getSoundIds(d),m=0;m<p.length;m++){var h=_._soundById(p[m]);if(h)if(typeof t=="number")h._orientation=[t,o,a],h._node&&(h._panner||(h._pos||(h._pos=_._pos||[0,0,-.5]),r(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(o,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):h._panner.setOrientation(t,o,a)),_._emit("orientation",h._id);else return h._orientation}return _},Howl.prototype.pannerAttr=function(){var t=this,o=arguments,a,d,_;if(!t._webAudio)return t;if(o.length===0)return t._pannerAttr;if(o.length===1)if(typeof o[0]=="object")a=o[0],typeof d>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),t._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:t._panningModel});else return _=t._soundById(parseInt(o[0],10)),_?_._pannerAttr:t._pannerAttr;else o.length===2&&(a=o[0],d=parseInt(o[1],10));for(var p=t._getSoundIds(d),m=0;m<p.length;m++)if(_=t._soundById(p[m]),_){var h=_._pannerAttr;h={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:h.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:h.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:h.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:h.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:h.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:h.panningModel};var y=_._panner;y?(y.coneInnerAngle=h.coneInnerAngle,y.coneOuterAngle=h.coneOuterAngle,y.coneOuterGain=h.coneOuterGain,y.distanceModel=h.distanceModel,y.maxDistance=h.maxDistance,y.refDistance=h.refDistance,y.rolloffFactor=h.rolloffFactor,y.panningModel=h.panningModel):(_._pos||(_._pos=t._pos||[0,0,-.5]),r(_,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var o=this,a=o._parent;o._orientation=a._orientation,o._stereo=a._stereo,o._pos=a._pos,o._pannerAttr=a._pannerAttr,t.call(this),o._stereo?a.stereo(o._stereo):o._pos&&a.pos(o._pos[0],o._pos[1],o._pos[2],o._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var o=this,a=o._parent;return o._orientation=a._orientation,o._stereo=a._stereo,o._pos=a._pos,o._pannerAttr=a._pannerAttr,o._stereo?a.stereo(o._stereo):o._pos?a.pos(o._pos[0],o._pos[1],o._pos[2],o._id):o._panner&&(o._panner.disconnect(0),o._panner=void 0,a._refreshBuffer(o)),t.call(this)}}(Sound.prototype.reset);var r=function(t,o){o=o||"spatial",o==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(ke);function ot(i){var r=Math.floor(i/60)||0,t=i-r*60||0;return r+":"+(t<10?"0":"")+t}class rt{constructor(r){this.stepEvents=[],this.timeout=1e3,this.index=0,this.playlist=r.audios,this.debug=r.debug??!1}play(r){this.debug&&console.log("play",r);var t=this;let o;r=typeof r=="number"?r:t.index;var a=t.playlist[r];a.howl?o=a.howl:(t.debug&&console.log("new howl"),o=a.howl=new ke.Howl({src:[a.url],html5:!0,onplay(){ot(Math.round(o.duration())),t.resetInterval()},onload(){},onend(){t.skip("next")},onpause(){},onstop(){},onseek(){t.resetInterval()}})),!o.playing()&&o.play(),t.index=r}pause(){this.debug&&console.log("pause");var r=this;r.playlist[r.index].howl.pause()}skip(r){this.debug&&console.log("skip",r);var t=this,o=0;r==="prev"?(o=t.index-1,o<0&&(o=t.playlist.length-1)):(o=t.index+1,o>=t.playlist.length&&(o=0)),t.skipTo(o)}skipTo(r){this.debug&&console.log("skipTo",r);var t=this;t.playlist[t.index].howl?.stop(),t.play(r)}volume(r){this.debug&&console.log("volume",r),Howler.volume(r)}seek(r){this.debug&&console.log("seek",r);var t=this,o=t.playlist[t.index].howl;o?.playing()&&o.seek(o.duration()*r)}resetInterval(){var r=this;r.interval&&clearInterval(r.interval),clearInterval(r.interval),r.interval=window.setInterval(()=>{r.step()},r.timeout)}step(){this.debug&&console.log("step");var r=this,t=r.playlist[r.index].howl,o=t?.seek()||0;const a=o/t?.duration()*100;r.stepEvents.forEach(d=>d({seek:o,percent:a})),t?.playing()||clearInterval(r.interval)}onStep(r){this.stepEvents.push(r)}offStep(r){this.stepEvents=this.stepEvents.filter(t=>t!==r)}}const it=M('<div><div class="aper-list-lyric"><div class="aper-list"></div><div class="aper-lyric"></div></div><div class="aper-control"><button></button><button>play</button></div></div>'),st=i=>{const r=new rt({audios:i.audios,debug:i.debug}),[t,o]=W(i.defaultPlayIndex??0),a=p=>{o(p),r.skipTo(p),i.onPlayIndexChange?.(p)},[d,_]=W(0);return r.onStep(p=>{_(p.seek)}),ee(()=>{console.log(d())}),(()=>{const p=it.cloneNode(!0),m=p.firstChild,h=m.firstChild,y=h.nextSibling,e=m.nextSibling,n=e.firstChild,s=n.nextSibling;return E(h,H(Ye,{get audios(){return i.audios},get playIndex(){return t()},onPlayIndexChange:a})),E(y,H(nt,$e(()=>i.audios[t()],{get seek(){return d()}}))),n.$$click=()=>{console.log(d())},E(n,d),s.$$click=()=>{r.play()},P(()=>ae(p,ue(i.class,"aper"))),p})()};Te(["click"]);const at=M("<div></div>"),ut=()=>(()=>{const i=at.cloneNode(!0);return E(i,H(st,{})),i})();Xe(()=>H(ut,{}),document.getElementById("root"));
